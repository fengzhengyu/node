extends layout

block main
  h2.page-header
    = category.name
    | &nbsp;分类下的所有文章&nbsp;
    = posts.length
  each post in posts
    div.post
      h3.post-title
        a(href="/posts/view/"+post._id,target="_blank")
          =post.title
      div.post-abstract
        = truncate(post.content,150)
      div.post-meta
        span.post-created
          | 发布时间:&nbsp;
          =moment(post.created).format('YYYY-MM-DD')
        span.post-author
          | 作者:&nbsp;
          =post.author.name
        span.post-category
          | 分类:&nbsp;
          a(href='/posts/category/'+post.category.name,target="_blank")
            =post.category.name
        span.post-comment
          | 评论数量:&nbsp;
          =post.comments.length
        span.post-favorite
          | 点赞:&nbsp;
          =post.meta.favourites
        span.post-link
          a(href="/posts/view/"+post._id,target="_blank") 查看全文
  if pageCount > 1
    nav
      ul.pagination
        li
          a(href="",aria-label="Previous")
            span(aria-hidden="true") &laquo;
        - var curPage = 1;
        while curPage <= pageCount
          if (curPage == pageNum)
            li.active
              a(href="/posts?page="+curPage)= curPage++       
          else
            li
              a(href="/posts?page="+curPage)= curPage++         
        li
          a(href="",aria-label="Nexts")
            span(aria-hidden="true") &raquo;



      
//- block scripts    
//-   script $(function(){console.log('dom');  })
